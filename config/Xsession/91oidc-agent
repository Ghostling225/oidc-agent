# This file is sourced by Xsession(5), not executed.

# Do not edit this file. 
#
# oidc-agent is started by default
#
# To change this behaviour, create a file called oidc-agent-service.options in
# your oidc-agent directory ( $HOME/.config/oidc-agent or /etc/oidc-agent/, in
# that order) and set the START_AGENT_WITH_XSESSION variable:
#
# START_AGENT_WITH_XSESSION="True" to start oidc-agent via Xsession (Default)
# START_AGENT_WITH_XSESSION="False" to disable Xsession 
# 
# Use OIDC_AGENT_OPTS to set the arguments that should be used when the agent is
# started.

set -x

OIDC_AGENT_SERVICE=/usr/bin/oidc-agent-service
OIDC_AGENT_CONFIG=/etc/oidc-agent/
OIDC_AGENT=/usr/bin/oidc-agent

START_AGENT_WITH_XSESSION=True

OPTIONS_FILENAME="oidc-agent-service.options"

OPTIONS_FILENAME_USER=$HOME/.config/oidc-agent/${OPTIONS_FILENAME}
OPTIONS_FILENAME_GLOBAL=/etc/oidc-agent/${OPTIONS_FILENAME}

[ -e ${OPTIONS_FILENAME_USER} ] && {
  . ${OPTIONS_FILENAME_USER}
}
[ -e ${OPTIONS_FILENAME_USER} ] || {
  [ -e ${OPTIONS_FILENAME_GLOBAL} ] && {
    . ${OPTIONS_FILENAME_GLOBAL}
  }
}

if [ "x${START_AGENT_WITH_XSESSION}" = "xTrue" ]; then
  if [ -x "$OIDC_AGENT" ] && [ -z "$OIDC_SOCK" ]; then
    eval `$OIDC_AGENT_SERVICE start-from-x`
  fi
fi
set +x
# vim:set ai et sts=2 sw=2 tw=80:
